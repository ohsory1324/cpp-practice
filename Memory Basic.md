# 메모리

32비트 프로그래밍이라고 가정한다.

## 1byte = 8bits => 2<sup>8</sup>

16진수에서 1byte => 0x00 ~ 0xFF (총 256개)

0x12345678 => 0x`12 34 56 78` => 4bytes

## 2진수 -> 16진수

### 1byte
```
  11011111
 1101   1111
8+4+1  8+4+2+1
  13     15
   D     F

0b11011111 = 0xDF
```

### 2bytes
```
  11011111       00101000
 1101   1111    0010  1000
8+4+1  8+4+2+1   2     8
  13     15      2     8
   D     F       2     8

0b1101111100101000 = 0xDF28
```

## new, delete를 쓰지 말아야 하는 이유

프로그램을 시작하면 `프로세스`가 되면서 전체 바이너리 데이터가 메모리에 로드된다. 그런데 메모리는 한정되어 있으므로 놀고 있는 프로세스는 HDD에 옮긴다. 이렇게 옮기는 단위를 `페이지`라고 한다. 하나의 프로그램 안에서도 여러개의 페이지를 사용하고 있고, 실제 사용하는 코드와 사용하지 않는 코드가 있다. 이를 운영체제가 알아서 HDD에 옮겼다 RAM에 옮겼다 하는데 이를 `페이지 스왑핑`이라고 한다.

컴퓨터를 켜놓고 잘 쓰다가 몇 시간 후 다시 사용하면 하드디스크가 막 돌면서 반응이 느린 경우가 있다. 그 이유 중 하나가, 운영체제가 프로세스를 사용하지 않는 줄 알고 HDD에 옮겨놨기 때문이다. 즉, HDD에서 다시 RAM으로 옮겨오느라 느린 것. 이런 경우를 `페이지 폴트`라고 한다.

`new`와 `delete`를 많이 사용하면 페이지 폴트가 많이 발생하므로, 미리 메모리 풀을 만들어 놓고 사용하는 것이 훨씬 성능상 좋다.

## 스택과 힙

C/C++에서는 메모리의 사용을 스택과 힙으로 구분한다.

- 스택
```cpp
int a;
```
4바이트가 스택에 할당된다.

- 힙
```cpp
int* p = new int;
```
`int*` 부분이 스택에 할당되고, `new int`는 힙에 할당되어 주소를 반환한다. 즉, 8바이트의 메모리 공간을 차지한다. 코드는 한 줄 이지만, 여러 단계를 거치기 때문에 느리다.

결론: 스택이 힙보다 훨씬 빠르다. new를 사용하는 경우는 차차 공부.
